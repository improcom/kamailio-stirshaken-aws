modparam("cfgutils", "lock_set_size", 4)

failure_route[REDIR302] {
  xlog("L_INFO", "== INFOTRACE. $ci - REDIR302\n");
  xlog("L_INFO", "== INFOTRACE. ci:$ci rm:$rm si:$si re:$re rc:$rc ru:$ru fu: $fu tu:$tu td:$td du:$du ou:$ou su:$su rs:$rs ct:$ct - REDIR302\n\n");
  if(t_check_status("302")) {
    xlog("L_INFO", "== INFOTRACE. matched 302\n");
    get_redirects("1:1");
    t_relay();
  }
}

request_route {
  xlog("L_INFO", "== TRACE. $ci - request_route\n");
  xlog("L_INFO", "== TRACE. $ci - $rm From: $fu (IP:$si:$sp)\n");
  xlog("L_INFO", "== TRACE. $ci -       To: $tu\n");
  xlog("L_INFO", "== TRACE. $ci -    Destination URI : $du\n");
  xlog("L_INFO", "== TRACE. $ci - SIP Request header : $ru\n");
  xlog("L_INFO", "== TRACE. $ci -  User Agent header : $ua\n");